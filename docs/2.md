# ‚öôÔ∏è –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ .env: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –±–ª–æ–≥–∞ –Ω–∞ FastAPI  

–í —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –º—ã —Ä–∞–∑–±–µ—Ä—ë–º, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∞—à–µ–≥–æ –±–ª–æ–≥–∞ —Å –ø–æ–º–æ—â—å—é `.env`-—Ñ–∞–π–ª–∞ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ Python. –í—ã —É–∑–Ω–∞–µ—Ç–µ:  
- –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è  
- –ö–∞–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã (–ø–∞—Ä–æ–ª–∏, –∫–ª—é—á–∏)  
- –ö–∞–∫ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥ —Ä–∞–∑–Ω—ã–µ —Å—Ä–µ–¥—ã (–ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞, –ø—Ä–æ–¥–∞–∫—à–Ω)  
- –ö–∞–∫ —Ä–∞—Å—à–∏—Ä—è—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–æ –º–µ—Ä–µ —Ä–æ—Å—Ç–∞ –ø—Ä–æ–µ–∫—Ç–∞  

---

## üõ°Ô∏è –ó–∞—á–µ–º –Ω—É–∂–µ–Ω .env-—Ñ–∞–π–ª?  

`.env` ‚Äî —ç—Ç–æ —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è **–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è**. –û–Ω –ø–æ–º–æ–≥–∞–µ—Ç:  
1. **–•—Ä–∞–Ω–∏—Ç—å —Å–µ–∫—Ä–µ—Ç—ã –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –∫–æ–¥–∞** (–ø–∞—Ä–æ–ª–∏ –ë–î, API-–∫–ª—é—á–∏)  
2. **–õ–µ–≥–∫–æ –º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏ (–ª–æ–∫–∞–ª—å–Ω—ã–π –ü–ö ‚Üî —Å–µ—Ä–≤–µ—Ä)  
3. **–ó–∞—â–∏—Ç–∏—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –æ—Ç —Å–ª—É—á–∞–π–Ω–æ–π –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –≤ Git  

> üìå **–í–∞–∂–Ω–æ!** –§–∞–π–ª `.env` **–ù–ï–õ–¨–ó–Ø** –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π. –î–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ `.gitignore`!  

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ .env-—Ñ–∞–π–ª–∞ –¥–ª—è –±–ª–æ–≥–∞  

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (`myblog/apps/backend/api/`) —Å–æ —Å–ª–µ–¥—É—é—â–∏–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º:  

```env
# .env
# === –ë–∞–∑–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ===
DOMAIN=dreammanor.ru  # –î–æ–º–µ–Ω –≤–∞—à–µ–≥–æ —Å–∞–π—Ç–∞
ENVIRONMENT=local     # –û–∫—Ä—É–∂–µ–Ω–∏–µ: local, staging, production
PROJECT_NAME="–ú–æ–π –±–ª–æ–≥ –Ω–∞ FastAPI"  

# === –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ===
SECRET_KEY=–≤–∞—à_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á  # –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —á–µ—Ä–µ–∑: openssl rand -hex 32
BACKEND_CORS_ORIGINS="http://localhost:9000,http://localhost:5173"  # –î–æ–º–µ–Ω—ã –¥–ª—è CORS

# === –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä ===
FIRST_SUPERUSER=admin@blog.ru  # –õ–æ–≥–∏–Ω –ø–µ—Ä–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
FIRST_SUPERUSER_PASSWORD=secret123!  # –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
USERS_OPEN_REGISTRATION=False  # –†–∞–∑—Ä–µ—à–µ–Ω–∞ –ª–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# === –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL) ===
POSTGRES_SERVER=localhost
POSTGRES_PORT=5432
POSTGRES_DB=blog_db
POSTGRES_USER=blog_user
POSTGRES_PASSWORD=strong_password_here!

# === Email (–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä–æ–ª—è) ===
SMTP_HOST=smtp.example.com  # –ù–∞–ø—Ä–∏–º–µ—Ä, smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@example.com
SMTP_PASSWORD=email_password
EMAILS_FROM_EMAIL=noreply@blog.ru  # Email –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
SMTP_TLS=True
```

---

## üêç –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ Python (config.py)  

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `config.py` –≤ –ø–∞–ø–∫–µ `app/core/`. –û–Ω –±—É–¥–µ—Ç —á–∏—Ç–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ `.env` –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –∏—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å.  

```python
"""
–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –±–ª–æ–≥–∞ –Ω–∞ FastAPI.

–≠—Ç–æ—Ç —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ —Ñ–∞–π–ª–∞ .env –∏ –¥–µ–ª–∞–µ—Ç –∏—Ö –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç settings.
–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç –æ–±—ä–µ–∫—Ç –≤–æ –≤—Å—ë–º –ø—Ä–æ–µ–∫—Ç–µ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –æ–∫—Ä—É–∂–µ–Ω–∏—è.
–ü—Ä–∏ –¥–µ–ø–ª–æ–µ —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª .env –ù–ï –ø–æ–ø–∞–¥–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π, –¥–æ–±–∞–≤–∏–≤ –µ–≥–æ –≤ .gitignore.
"""

import secrets  # –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–ª—É—á–∞–π–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (—Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏)
import warnings  # –î–ª—è –≤—ã–≤–æ–¥–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π

from typing import Annotated, Any, Literal  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤
from pydantic import (
    AnyUrl,  # –í–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è URL
    BeforeValidator,  # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
    PostgresDsn,  # –í–∞–ª–∏–¥–∞—Ç–æ—Ä –¥–ª—è —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL
    computed_field,  # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –≤—ã—á–∏—Å–ª—è–µ–º—ã—Ö –ø–æ–ª–µ–π
    model_validator,  # –î–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–¥–µ–ª–∏
)
from pydantic_core import MultiHostUrl  # –î–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è —Å–ª–æ–∂–Ω—ã—Ö URL
from pydantic_settings import (
    BaseSettings,
    SettingsConfigDict,
)  # –ë–∞–∑–æ–≤—ã–µ –∫–ª–∞—Å—Å—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫
from typing_extensions import (
    Self,
)  # –î–ª—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º–æ–≥–æ —Ç–∏–ø–∞ self –ø—Ä–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏


def parse_cors(v: Any) -> list[str] | str:
    """
    –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä–æ–∫—É —Å –∞–¥—Ä–µ—Å–∞–º–∏, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –∑–∞–ø—è—Ç—ã–º–∏, –≤ —Å–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤.

    –ê—Ä–≥—É–º–µ–Ω—Ç—ã:
        v: –ó–Ω–∞—á–µ–Ω–∏–µ CORS –∏–∑ —Ñ–∞–π–ª–∞ .env (—Å—Ç—Ä–æ–∫–∞ –∏–ª–∏ —Å–ø–∏—Å–æ–∫).

    –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç:
        –°–ø–∏—Å–æ–∫ –¥–æ–º–µ–Ω–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–µ—à—ë–Ω–Ω—ã—Ö CORS.
    """
    if isinstance(v, str) and not v.startswith("["):
        return [i.strip() for i in v.split(",")]
    elif isinstance(v, list | str):
        return v
    raise ValueError("–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç CORS")


class Settings(BaseSettings):
    """
    –ö–ª–∞—Å—Å –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞.

    –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ —Ñ–∞–π–ª–∞ .env –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∏—Ö –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å.
    –ò–∑–º–µ–Ω—è—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–æ–∂–Ω–æ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ ‚Äì –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å .env-—Ñ–∞–π–ª.
    """

    # –ß—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞ .env; —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞.
    # –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–æ–±–∞–≤–∏—Ç—å .env –≤ .gitignore, —á—Ç–æ–±—ã —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
    model_config = SettingsConfigDict(
        env_file=".env",
        env_ignore_empty=True,  # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
        extra="ignore",  # –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–µ –æ–ø–∏—Å–∞–Ω–Ω—ã–µ –≤ –º–æ–¥–µ–ª–∏
    )

    # --- –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ API –∏ –ø—Ä–æ–µ–∫—Ç–∞ ---
    API_V1_STR: str = "/api/v1"  # –í–µ—Ä—Å–∏—è API
    # –ï—Å–ª–∏ SECRET_KEY —É–∫–∞–∑–∞–Ω –≤ .env, –æ–Ω –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ—Ç —ç—Ç—É –∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—é
    SECRET_KEY: str = secrets.token_urlsafe(32)
    REDIS_HOST: str = "localhost"
    ACCESS_TOKEN_EXPIRE_MINUTES: int = 60 * 24 * 8  # –°—Ä–æ–∫ –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞: 8 –¥–Ω–µ–π

    # --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–æ–º–µ–Ω–∞ –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è ---
    DOMAIN: str = "localhost"  # –î–æ–º–µ–Ω –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    # –û–∫—Ä—É–∂–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: local, staging –∏–ª–∏ production.
    # –î–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω—è–π—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ production.
    ENVIRONMENT: Literal["local", "staging", "production"] = "local"
    SELENIUM_HUB_HOST: str = "http://localhost"
    CELERY_TASK_INTERVAL: int = 60
    CHROME_DRIVER: str = "local"

    @computed_field
    @property
    def server_host(self) -> str:
        """
        –í—ã—á–∏—Å–ª—è–µ–º–æ–µ –ø–æ–ª–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è URL —Å–µ—Ä–≤–µ—Ä–∞.

        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–æ—Ç–æ–∫–æ–ª http –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏, –∏ https –¥–ª—è staging/production.
        """
        if self.ENVIRONMENT == "local":
            return f"http://{self.DOMAIN}"
        return f"https://{self.DOMAIN}"

    # --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ CORS ---
    # –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è BACKEND_CORS_ORIGINS –¥–æ–ª–∂–Ω–∞ –∑–∞–¥–∞–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ .env –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏ —Å –¥–æ–º–µ–Ω–∞–º–∏, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã–º–∏ –∑–∞–ø—è—Ç—ã–º–∏.
    BACKEND_CORS_ORIGINS: Annotated[list[AnyUrl] | str, BeforeValidator(parse_cors)] = (
        []
    )

    # --- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ ---
    PROJECT_NAME: str  # –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞, –∑–∞–¥–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ .env
    SENTRY_DSN: AnyUrl | None = None  # DSN –¥–ª—è Sentry, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

    # --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL ---
    POSTGRES_SERVER: str  # –°–µ—Ä–≤–µ—Ä –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    POSTGRES_USER: str  # –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    POSTGRES_PASSWORD: str  # –ü–∞—Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    POSTGRES_DB: str = (
        "blog_db"  # –ù–∞–∑–≤–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω–æ, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –¥–µ—Ñ–æ–ª—Ç–Ω–æ–µ)
    )
    POSTGRES_PORT: int = 5432  # –ü–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

    @computed_field
    @property
    def database_url(self) -> PostgresDsn:
        """
        –í—ã—á–∏—Å–ª—è–µ–º–æ–µ –ø–æ–ª–µ –¥–ª—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç—Ä–æ–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL.

        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è postgresql+asyncpg.
        """
        return f"postgresql+asyncpg://{self.POSTGRES_USER}:{self.POSTGRES_PASSWORD}@{self.POSTGRES_SERVER}:{self.POSTGRES_PORT}/{self.POSTGRES_DB}"

    # --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ email ---
    SMTP_HOST: str | None = None  # SMTP-—Å–µ—Ä–≤–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, smtp.gmail.com)
    SMTP_PORT: int = 587  # –ü–æ—Ä—Ç SMTP-—Å–µ—Ä–≤–µ—Ä–∞
    SMTP_USER: str | None = None  # –õ–æ–≥–∏–Ω –¥–ª—è SMTP-—Å–µ—Ä–≤–µ—Ä–∞
    SMTP_PASSWORD: str | None = None  # –ü–∞—Ä–æ–ª—å –¥–ª—è SMTP-—Å–µ—Ä–≤–µ—Ä–∞
    EMAILS_FROM_EMAIL: str | None = None  # Email, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –ø–∏—Å—å–º–∞
    EMAILS_FROM_NAME: str | None = None  # –ò–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –¥–ª—è –ø–∏—Å–µ–º

    @model_validator(mode="after")
    def _set_default_emails_from(self) -> Self:
        """
        –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –µ—Å–ª–∏ –æ–Ω–æ –Ω–µ –∑–∞–¥–∞–Ω–æ –≤ .env.
        –í –¥–∞–Ω–Ω–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏–º—è –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–∞–≤–Ω–æ –Ω–∞–∑–≤–∞–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞.
        """
        if not self.EMAILS_FROM_NAME:
            self.EMAILS_FROM_NAME = self.PROJECT_NAME
        return self

    EMAIL_RESET_TOKEN_EXPIRE_HOURS: int = 48  # –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ —Ç–æ–∫–µ–Ω–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è

    @computed_field
    @property
    def emails_enabled(self) -> bool:
        """
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –º–æ–∂–Ω–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å email: –∞–∫—Ç–∏–≤–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è, –µ—Å–ª–∏ –∑–∞–¥–∞–Ω—ã SMTP_HOST –∏ EMAILS_FROM_EMAIL.
        """
        return bool(self.SMTP_HOST and self.EMAILS_FROM_EMAIL)

    EMAIL_TEST_USER: str = (
        "test@example.com"  # –¢–µ—Å—Ç–æ–≤—ã–π email –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
    )

    # --- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞) ---
    FIRST_SUPERUSER: str  # Email —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ .env)
    FIRST_SUPERUSER_PASSWORD: str  # –ü–∞—Ä–æ–ª—å —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤ .env)
    USERS_OPEN_REGISTRATION: bool = (
        False  # –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ –ª–∏ —Å–≤–æ–±–æ–¥–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    )

    # --- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã ---
    RESET_PASSWORD_TOKEN_SECRET: str = secrets.token_urlsafe(32)
    VERIFICATION_TOKEN_SECRET: str = secrets.token_urlsafe(32)

    def _check_default_secret(self, var_name: str, value: str | None) -> None:
        """
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ª–∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Å–µ–∫—Ä–µ—Ç–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
        –ï—Å–ª–∏ –∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–≤–Ω–æ "–≤–∞—à_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á", –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –∏–ª–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—à–∏–±–∫—É.
        """
        if value == "–≤–∞—à_—É–Ω–∏–∫–∞–ª—å–Ω—ã–π_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á":
            message = (
                f"–ó–Ω–∞—á–µ–Ω–∏–µ {var_name} —Ä–∞–≤–Ω–æ –∑–Ω–∞—á–µ–Ω–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. "
                "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∏–∑–º–µ–Ω–∏—Ç–µ –µ–≥–æ –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏."
            )
            if self.ENVIRONMENT == "local":
                warnings.warn(message, stacklevel=1)
            else:
                raise ValueError(message)

    @model_validator(mode="after")
    def _enforce_non_default_secrets(self) -> Self:
        """
        –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, —á—Ç–æ –≤–∞–∂–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.
        –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –≤–∞—à–µ–≥–æ –±–ª–æ–≥–∞.
        """
        self._check_default_secret("SECRET_KEY", self.SECRET_KEY)
        self._check_default_secret("POSTGRES_PASSWORD", self.POSTGRES_PASSWORD)
        self._check_default_secret(
            "FIRST_SUPERUSER_PASSWORD", self.FIRST_SUPERUSER_PASSWORD
        )
        return self


# –°–æ–∑–¥–∞–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–æ –≤—Å—ë–º –ø—Ä–æ–µ–∫—Ç–µ.
settings = Settings()  # type: ignore

# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞:
# 1. –ü—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ .env —Å ENVIRONMENT=local.
# 2. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Ñ–∞–π–ª .env –≤ .gitignore, —á—Ç–æ–±—ã —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø–æ–ø–∞–ª–∏ –≤ –ø—É–±–ª–∏—á–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π.
# 3. –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–∑–º–µ–Ω–∏—Ç–µ SECRET_KEY, POSTGRES_PASSWORD –∏ FIRST_SUPERUSER_PASSWORD –Ω–∞ –Ω–∞–¥—ë–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è.
# 4. –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫:
#    - –¥–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ .env,
#    - –æ–±—ä—è–≤–∏—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –ø–æ–ª–µ –≤ –∫–ª–∞—Å—Å–µ Settings, –∏
#    - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç settings.

```

---

## üß© –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç?  

### 1. –ß—Ç–µ–Ω–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è  
–ö–ª–∞—Å—Å `Settings` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–∏—Ç–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ `.env` –±–ª–∞–≥–æ–¥–∞—Ä—è `model_config`.  

### 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö  
Pydantic –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å `POSTGRES_PORT=abc`, –ø–æ–ª—É—á–∏–º –æ—à–∏–±–∫—É.  

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è URL –¥–ª—è –ë–î  
–í—ã—á–∏—Å–ª—è–µ–º–æ–µ –ø–æ–ª–µ `database_url` —Å–æ–∑–¥–∞—ë—Ç –≥–æ—Ç–æ–≤—É—é —Å—Ç—Ä–æ–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥—Ä—É–≥–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö.  

### 4. –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—à–∏–±–æ–∫  
–ú–µ—Ç–æ–¥ `validate_secrets` –Ω–µ –ø–æ–∑–≤–æ–ª–∏—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º `SECRET_KEY` –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.  

---

## üí° –°–æ–≤–µ—Ç—ã –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤  

1. **–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:  
   ```env
   ENVIRONMENT=local
   POSTGRES_PASSWORD=postgres  # –ü—Ä–æ—Å—Ç–æ–π –ø–∞—Ä–æ–ª—å –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞
   ```

2. **–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ** –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:  
   - –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ `secret`-–∑–Ω–∞—á–µ–Ω–∏—è  
   - –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `ENVIRONMENT=production`  
   - –£–¥–∞–ª–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏–∑ `.env`  

3. **–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É**:  
   - –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ `.env`  
   - –û–±—ä—è–≤–∏—Ç–µ –ø–æ–ª–µ –≤ –∫–ª–∞—Å—Å–µ `Settings`  
   ```python
   class Settings(BaseSettings):
       NEW_FEATURE_FLAG: bool = False  # –ù–æ–≤—ã–π —Ñ–ª–∞–≥
   ```

---

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ –∫–æ–¥–µ?  

–î–æ—Å—Ç—É–ø –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –æ–±—ä–µ–∫—Ç `settings`:  

```python
from app.core.config import settings

print(f"–ù–∞–∑–≤–∞–Ω–∏–µ –±–ª–æ–≥–∞: {settings.PROJECT_NAME}")
print(f"–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î: {settings.database_url}")
```

---

–¢–µ–ø–µ—Ä—å –≤–∞—à –ø—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ —Å —Ä–∞–∑–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è–º–∏! –í —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–∞—Ç—å–µ –º—ã –Ω–∞—Å—Ç—Ä–æ–∏–º PostgreSQL –∏ Alembic –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.